<main class="container-fluid h100vh">
    <div class="row h-100">
        <aside *ngIf="mobileNav" class="pt-3 col-sm-12 col-md-12 col-lg-5 col-xl-3 mb-3">
            <svg (click)="toggleMobileNav()" class="mobileClose" xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 20L4 4m16 0L4 20"/></svg>

            <svg class="mb-3" width="42" height="42" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="42" height="42" rx="10" fill="white"/>
                <path d="M32.0173 23.469H27.6997C27.6997 24.084 27.6699 25.1297 27.6103 25.6832C27.2828 28.0205 26.3895 28.9738 24.3051 29.4351C23.7096 29.5582 22.8461 29.6504 22.0123 29.6812C21.387 29.7119 20.8511 29.7119 20.3151 29.7119C19.4813 29.7119 18.7072 29.6812 17.8734 29.5889C15.134 29.3121 13.9727 28.5433 13.5558 25.4372C13.4069 24.2686 13.3176 22.6079 13.3176 21.0395C13.3176 19.5325 13.3771 17.9949 13.4665 16.857C13.7345 13.4126 15.0744 12.2747 17.8436 12.0287C18.588 11.9672 19.3622 11.9057 20.2853 11.9057C20.4937 11.9057 20.7022 11.9057 20.9106 11.9057C21.9528 11.9057 22.7865 11.9672 23.5905 12.0595C25.8833 12.3055 27.253 13.3511 27.4614 15.7806C27.4912 16.2112 27.521 16.8262 27.521 17.2875H31.9279C31.9279 16.611 31.9279 15.6576 31.8684 15.104C31.2728 9.96822 29.0098 8.49206 24.1563 8.09226C23.2332 8.03075 22.191 8 20.9404 8C19.4813 8 18.1712 8.03075 17.0992 8.09226C11.8883 8.43055 9.71464 10.3988 9.20844 15.9651C9.08933 17.3798 9 19.2558 9 21.0395C9.02978 22.9154 9.11911 24.8529 9.29776 26.2983C9.92307 31.5879 12.2159 33.1563 16.7717 33.4946C17.7245 33.5869 18.9156 33.6484 20.2258 33.6484C20.4342 33.6484 20.6426 33.6484 20.8511 33.6484C22.3697 33.6484 23.6501 33.5561 24.6922 33.4331C29.3969 32.8795 31.3026 31.2804 31.8982 26.1445C31.9875 25.468 32.0173 24.2071 32.0173 23.469Z" fill="black"/>
                <path d="M20.5093 24.6246C22.6281 24.6246 24.3458 22.9069 24.3458 20.7881C24.3458 18.6693 22.6281 16.9517 20.5093 16.9517C18.3905 16.9517 16.6729 18.6693 16.6729 20.7881C16.6729 22.9069 18.3905 24.6246 20.5093 24.6246Z" fill="black"/>
            </svg>
            
            <h3>{{dashboardService.getIntegerOfTotalRewardsToday()}}<span>.{{dashboardService.getDecimalOfTotalRewardsToday()}}</span> <small>today</small></h3>

            <ul class="nav nav-pills flex-column mb-auto">
                <li class="nav-item">
                  <a [ngClass]="{'active' : isActive(0)}" (click)="dashboardService.selectValidator(0)" class="nav-link" aria-current="page">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ai ai-Home"><path d="M21 19v-6.733a4 4 0 0 0-1.245-2.9L13.378 3.31a2 2 0 0 0-2.755 0L4.245 9.367A4 4 0 0 0 3 12.267V19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z"/></svg>
                    Overview
                  </a>
                </li>
                <li>
                  <a [routerLink]="['/settings']" class="nav-link">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ai ai-Gear"><path d="M14 3.269C14 2.568 13.432 2 12.731 2H11.27C10.568 2 10 2.568 10 3.269v0c0 .578-.396 1.074-.935 1.286-.085.034-.17.07-.253.106-.531.23-1.162.16-1.572-.249v0a1.269 1.269 0 0 0-1.794 0L4.412 5.446a1.269 1.269 0 0 0 0 1.794v0c.41.41.48 1.04.248 1.572a7.946 7.946 0 0 0-.105.253c-.212.539-.708.935-1.286.935v0C2.568 10 2 10.568 2 11.269v1.462C2 13.432 2.568 14 3.269 14v0c.578 0 1.074.396 1.286.935.034.085.07.17.105.253.231.531.161 1.162-.248 1.572v0a1.269 1.269 0 0 0 0 1.794l1.034 1.034a1.269 1.269 0 0 0 1.794 0v0c.41-.41 1.04-.48 1.572-.249.083.037.168.072.253.106.539.212.935.708.935 1.286v0c0 .701.568 1.269 1.269 1.269h1.462c.701 0 1.269-.568 1.269-1.269v0c0-.578.396-1.074.935-1.287.085-.033.17-.068.253-.104.531-.232 1.162-.161 1.571.248v0a1.269 1.269 0 0 0 1.795 0l1.034-1.034a1.269 1.269 0 0 0 0-1.794v0c-.41-.41-.48-1.04-.249-1.572.037-.083.072-.168.106-.253.212-.539.708-.935 1.286-.935v0c.701 0 1.269-.568 1.269-1.269V11.27c0-.701-.568-1.269-1.269-1.269v0c-.578 0-1.074-.396-1.287-.935a7.755 7.755 0 0 0-.105-.253c-.23-.531-.16-1.162.249-1.572v0a1.269 1.269 0 0 0 0-1.794l-1.034-1.034a1.269 1.269 0 0 0-1.794 0v0c-.41.41-1.04.48-1.572.249a7.913 7.913 0 0 0-.253-.106C14.396 4.343 14 3.847 14 3.27v0z"/><path d="M16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0z"/></svg>
                    Settings
                  </a>
                </li>
                <li>
                    <a class="nav-link" (click)="logout()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ai ai-SignOut"><path d="M13 12h9m0 0l-3.333-4M22 12l-3.333 4"/><path d="M14 7V5.174a2 2 0 0 0-2.166-1.993l-8 .666A2 2 0 0 0 2 5.84v12.32a2 2 0 0 0 1.834 1.993l8 .667A2 2 0 0 0 14 18.826V17"/></svg>
                      Log out
                    </a>
                  </li>
                <li class="border-top my-3"></li>

                <li class="validator" *ngFor="let validator of dashboardService.validatorList; index as i;">
                    <a class="nav-link" [ngClass]="{'active' : isActive(i+1)}" (click)="dashboardService.selectValidator(i+1)">
                        <img [src]="dashboardService.networkList[validator.networkId-1]['icon']">
                        <p class="m-0 p-0">{{validator.name}}</p>
                        <span class="{{validator['details']['status']}}">{{validator['details']['status']}}</span>
                    </a>
                </li>
              </ul>

              <div class="card bottom">
                <button (click)="toggleModal(addValidatorModal)"><svg _ngcontent-aen-c3="" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ai ai-Plus"><path _ngcontent-aen-c3="" d="M12 20v-8m0 0V4m0 8h8m-8 0H4"></path></svg> Add Validator</button>
              </div>
        </aside>
        <section class="pt-3 col-sm-12 col-md-12 col-lg-7 col-xl-9">
            <div class="container">

                <!-- Dashboard overview container -->
                <ng-container *ngIf="onOverview()">
                    <div class="row">
                        <div class="col">
                            <div id="notificationContainer" class="d-none d-md-flex mb-3">
                                <div id="supportIcon">
                                    <svg width="10" height="8" viewBox="0 0 10 8" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M2.5 0C1.1195 0 0 0.994083 0 2.22054C0 3.21058 0.4375 5.56031 4.744 7.93562C4.82114 7.97773 4.9097 8 5 8C5.0903 8 5.17886 7.97773 5.256 7.93562C9.5625 5.56031 10 3.21058 10 2.22054C10 0.994083 8.8805 0 7.5 0C6.1195 0 5 1.34578 5 1.34578C5 1.34578 3.8805 0 2.5 0Z"
                                            fill="white" />
                                    </svg>
                                </div>
                                <p>Consider supporting Cyclops by nominating <a href="https://decentradot.com/"
                                        target="_blank">decentraDOT validators</a>. Thank you!</p>
                            </div>
                        </div>
                        <!-- <div class="col-12 mb-3">
                            <div class="card">
                                <div class="head">
                                    <p>Critical events</p>
                                </div>
                                <div class="body tableWrapper">
                                    <table>
                                        <tr>
                                            <th style="width: 10%;">Validator</th>
                                            <th style="width: 20%;">Event</th>
                                            <th style="width: 20%;">Date</th>
                                            <th style="width: 50%;">Description</th>
                                        </tr>
                                        <tr *ngIf="dashboardService.eventList.length == 0">
                                            <td>-</td>
                                            <td>-</td>
                                            <td>-</td>
                                            <td>-</td>
                                        </tr>
                                        <tr *ngFor="let event of dashboardService.eventList">
                                            <td><b>{{event.name}}</b></td>
                                            <td>{{event.eventType}}</td>
                                            <td>{{dashboardService.formatUnixTimestamp(event.timestamp)}}</td>
                                            <td>{{event.description}}</td>
                                            <td (click)="dashboardService.removeEvent(event.eventId)"><svg
                                                    xmlns="http://www.w3.org/2000/svg" width="36" height="36"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    class="ai ai-TrashCan">
                                                    <path
                                                        d="M4 6h16l-1.58 14.22A2 2 0 0 1 16.432 22H7.568a2 2 0 0 1-1.988-1.78L4 6z" />
                                                    <path
                                                        d="M7.345 3.147A2 2 0 0 1 9.154 2h5.692a2 2 0 0 1 1.81 1.147L18 6H6l1.345-2.853z" />
                                                    <path d="M2 6h20" />
                                                    <path d="M10 11v5" />
                                                    <path d="M14 11v5" />
                                                </svg></td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div> -->
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-lg-12 col-xl-6 mb-2">
                            <div class="card incomePieContainer">
                                <div class="head">
                                    <p>Income distribution</p>
                                </div>
                                <div class="body wrapCenter">
                                    <div class="pieWrap">
                                        <div class="pieMeta">
                                            <p>{{dashboardService.addThousandSeperator(dashboardService.getTotalCombinedRewards())}}
                                            </p>
                                            <p>All-time Rewards</p>
                                        </div>
                                        <canvas id="incomePieChart" baseChart class="chart"
                                            [data]="dashboardService.incomePieData" [options]="incomeChartOption"
                                            [type]="incomeChartType">
                                        </canvas>
                                    </div>
                                    <div class="legenda">
                                        <ul>
                                            <li *ngFor="let validator of dashboardService.validatorList">
                                                {{validator.name}}</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xl-6 mb-2">
                            <div class="card tableWrapper">
                                <div class="head">
                                    <p>Token prices</p>
                                </div>
                                <div class="body">
                                    <table class="largeCells">
                                        <tr *ngFor="let network of dashboardService.networkList">
                                            <td><img [src]="network.icon"></td>
                                            <td>
                                                ${{roundTwoDigits(network.price)}}
                                                <p class="priceChangeWrapper mb-0"
                                                [ngClass]="{'down' : !isPositive(network.change), 'up' : isPositive(network.change)}"><img src="assets/icons/caret_up.svg" *ngIf="isPositive(network.change)">
                                                    <img src="assets/icons/caret_down.svg"
                                                        *ngIf="!isPositive(network.change)">
                                                    {{roundTwoDigits(network.change)}}%</p>
                                            </td>
                                            
                                            <td class="priceSparkline"><canvas baseChart class="chart"
                                                [data]="getSparklineMeta(network.sparkline)" [options]="sparklineOptions"
                                                [type]="lineChartType" style="width: 250px; height: 75px;"></canvas></td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-lg-12 col-xl-6 mb-2">
                            <div class="card">
                                <div class="head">
                                    <p>Combined daily rewards</p>
                                    <p>in USD</p>
                                </div>
                                <div class="body">
                                    <canvas id="combinedDailyRewardChart" baseChart class="chart"
                                        [data]="dashboardService.dailyIncomeData" [options]="dailyIncomeChartOption"
                                        [type]="dailyIncomeChartType" style="height: 200px;">
                                    </canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xl-6 mb-2">
                            <div class="card">
                                <div class="head">
                                    <p>Combined monthly rewards</p>
                                    <p>in USD</p>
                                </div>
                                <div class="body">
                                    <canvas id="combinedMonthlyRewardChart" baseChart class="chart"
                                        [data]="dashboardService.monthlyIncomeData" [options]="dailyIncomeChartOption"
                                        [type]="dailyIncomeChartType" style="height: 200px;">
                                    </canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 mb-2">
                            <div class="card poolContainer">
                                <div class="head">
                                    <p>My pools</p>
                                    <button (click)="toggleModal(addPoolModal)"><svg xmlns="http://www.w3.org/2000/svg"
                                            width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                            class="ai ai-Plus">
                                            <path d="M12 20v-8m0 0V4m0 8h8m-8 0H4" />
                                        </svg> Add pool</button>
                                </div>
                                <div class="body p-3 pt-0">

                                    <ng-container *ngFor="let pool of dashboardService.poolList">
                                        <div class="poolHeadContainer mb-2">
                                            <div class="poolIcon">
                                                <img [src]="dashboardService.networkList[pool.networkId-1]['icon']">
                                            </div>
                                            <p *ngIf="pool['meta'].length != 0">{{pool['name']}}</p>
                                            <p *ngIf="pool['meta'].length == 0">Retrieving pool data in a few minutes..</p>
                                        </div>
                                        <div class="poolWrapper">
                                            <div>
                                                <div class="poolData">
                                                    <small>Total pooled</small>
                                                    <p>{{calculatePoolMonetaryValue(pool['networkId'],
                                                        pool['meta'][0]['totalBond'])}}</p>

                                                    <div class="changeWrapper"
                                                        [ngClass]="{ 'positive': calculateDifferenceValue(pool, 'totalBond').includes('+'), 'negative': calculateDifferenceValue(pool, 'totalBond').includes('-') }">
                                                        <p>{{calculateDifferenceValue(pool, "totalBond")}} <small>today</small></p>
                                                    </div>
                                                </div>
                                                <canvas class="poolChart" baseChart class="chart"
                                                    [data]="getPoolMetaData(pool['meta'], 'totalBond', pool['networkId'], true)" [options]="poolChartOptions"
                                                    [type]="lineChartType" style="width: 115px; height: 75px;"></canvas>
                                            </div>
                                            <div>
                                                <div class="poolData">
                                                    <small>Member count</small>
                                                    <p>{{pool['meta'][0]['memberCount']}}</p>
                                                    <div class="changeWrapper"
                                                        [ngClass]="{ 'positive': calculateDifferenceNumber(pool, 'memberCount').includes('+'), 'negative': calculateDifferenceNumber(pool, 'memberCount').includes('-') }">
                                                        <p>{{calculateDifferenceNumber(pool, "memberCount")}} <small>today</small></p>
                                                    </div>
                                                </div>
                                                <canvas class="poolChart" baseChart class="chart"
                                                    [data]="getPoolMetaData(pool['meta'], 'memberCount', pool['networkId'], false)" [options]="poolChartOptions"
                                                    [type]="lineChartType" style="width: 115px; height: 75px;"></canvas>
                                            </div>
                                            <div>
                                                <div class="poolData">
                                                    <small>Pending rewards</small>
                                                    <p>{{calculatePoolMonetaryValue(pool['networkId'],
                                                        pool['meta'][0]['pendingRewards'])}}</p>
                                                    <div class="changeWrapper"
                                                        [ngClass]="{ 'positive': calculateDifferenceValue(pool, 'pendingRewards').includes('+'), 'negative': calculateDifferenceValue(pool, 'pendingRewards').includes('-') }">
                                                        <p>{{calculateDifferenceValue(pool, "pendingRewards")}} <small>today</small></p>
                                                    </div>
                                                </div>
                                                <canvas class="poolChart" baseChart class="chart"
                                                    [data]="getPoolMetaData(pool['meta'], 'pendingRewards', pool['networkId'], true)" [options]="poolChartOptions"
                                                    [type]="lineChartType" style="width: 115px; height: 75px;"></canvas>
                                            </div>
                                        </div>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-container>

                <!-- Validator overview container -->
                <ng-container *ngIf="!onOverview()">
                    <div class="row">
                        <div class="col-md-12 col-lg-12 col-xl-6 mb-2">
                            <div class="card eraProgressContainer">
                                <div class="head">
                                    <p>ERA progress</p>
                                </div>
                                <div class="body wrapCenter">
                                    <div class="pieWrap">
                                        <div class="pieMeta">
                                            <p id="eraPercentage">
                                                {{dashboardService.round(dashboardService.pastEraPercentage)}} %</p>
                                            <p id="eraDescription">ERA progress</p>
                                        </div>
                                        <canvas id="eraPieChart" baseChart class="chart eraPie"
                                            [data]="dashboardService.eraProgressData" [options]="eraProgressChartOption"
                                            [type]="eraProgressChartType">
                                        </canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xl-6 mb-2">
                            <div class="card tokenPriceContainer">
                                <div class="head">
                                    <p>7d price change</p>
                                    <p>{{dashboardService.getValidatorNetworkTokenPrice()}} per <img
                                            [src]="dashboardService.getValidatorNetworkIcon()"></p>
                                </div>
                                <div class="body">
                                    <canvas id="sparklineChart" baseChart class="chart"
                                        [data]="dashboardService.tokenChartData" [options]="tokenChartOptions"
                                        [type]="lineChartType" style="width: 100%; height: 200px;"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-lg-12 col-xl-6 mb-2">
                            <div class="card">
                                <div class="head">
                                    <p>Weekly overview</p>
                                    <p>in USD</p>
                                </div>
                                <div class="body">
                                    <canvas id="weeklyOverviewChart" baseChart class="chart"
                                        [data]="dashboardService.dailyIncomeData" [options]="dailyIncomeChartOption"
                                        [type]="dailyIncomeChartType" style="height: 200px;">
                                    </canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xl-6 mb-2">
                            <div class="card">
                                <div class="head">
                                    <p>Reward overview</p>
                                </div>
                                <div class="body tableWrapper">
                                    <table>
                                        <tr>
                                            <th>Date</th>
                                            <th>Rewards</th>
                                            <th>Monetary value</th>
                                        </tr>
                                        <tr>
                                            <td><b>Today</b></td>
                                            <td>{{dashboardService.validatorRewardOverview['daily']['reward']}}
                                                {{dashboardService.validatorRewardOverview['ticker']}}</td>
                                            <td>$
                                                {{dashboardService.addThousandSeperator(dashboardService.validatorRewardOverview['daily']['monetaryValue'].toFixed(2))}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><b>Week</b></td>
                                            <td>{{dashboardService.validatorRewardOverview['weekly']['reward']}}
                                                {{dashboardService.validatorRewardOverview['ticker']}}</td>
                                            <td>$
                                                {{dashboardService.addThousandSeperator(dashboardService.validatorRewardOverview['weekly']['monetaryValue'].toFixed(2))}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><b>Month</b></td>
                                            <td>{{dashboardService.validatorRewardOverview['monthly']['reward']}}
                                                {{dashboardService.validatorRewardOverview['ticker']}}</td>
                                            <td>$
                                                {{dashboardService.addThousandSeperator(dashboardService.validatorRewardOverview['monthly']['monetaryValue'].toFixed(2))}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><b>All-time</b></td>
                                            <td>{{dashboardService.validatorRewardOverview['allTime']['reward']}}
                                                {{dashboardService.validatorRewardOverview['ticker']}}</td>
                                            <td>$
                                                {{dashboardService.addThousandSeperator(dashboardService.validatorRewardOverview['allTime']['monetaryValue'].toFixed(2))}}
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-lg-12 col-xl-6 mb-2">
                            <div class="card" [ngClass]="{'disabled' : !dashboardService.isActive()}">
                                <div class="head">
                                    <p>Bond overview</p>
                                </div>
                                <div class="body tableWrapper">
                                    <table>
                                        <tr>
                                            <th>Type</th>
                                            <th>Amount</th>
                                        </tr>
                                        <tr>
                                            <td><b>Active nominators</b></td>
                                            <td><span
                                                    class="nominatorStatus">{{dashboardService.getNominatorCount()}}</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><b>Validator bond</b></td>
                                            <td>{{dashboardService.addThousandSeperator(dashboardService.getBondedOwner())}}
                                                {{dashboardService.validatorRewardOverview['ticker']}}</td>
                                        </tr>
                                        <tr>
                                            <td><b>Nominator bond</b></td>
                                            <td>{{dashboardService.addThousandSeperator(dashboardService.getBondedNominators())}}
                                                {{dashboardService.validatorRewardOverview['ticker']}}</td>
                                        </tr>
                                        <tr>
                                            <td><b>Total bonded</b></td>
                                            <td>{{dashboardService.addThousandSeperator(dashboardService.getBondedTotal())}}
                                                {{dashboardService.validatorRewardOverview['ticker']}}</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="col mb-2">
                            <div class="card" [ngClass]="{'disabled' : !dashboardService.isActive()}">
                                <div class="head">
                                    <p>ERA points</p>
                                </div>
                                <div class="body">
                                    <canvas id="eraPointChart" baseChart class="chart"
                                        [data]="dashboardService.eraChartData" [options]="eraChartOptions"
                                        [type]="lineChartType" style="width: 100%; height: 200px;"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-lg-12 col-xl-6 mb-2">
                            <div class="card">
                                <div class="head">
                                    <p>Nominators</p>
                                    <ng-container *ngIf="!dashboardService.isActive()">
                                        <span class="nominatorStatus">{{dashboardService.getNominatorCount()}}
                                            nominators</span>
                                    </ng-container>
                                </div>
                                <div class="body">
                                    <canvas id="nominatorChart" baseChart class="chart"
                                        [data]="dashboardService.nominatorChartData" [options]="lineChartOptions"
                                        [type]="lineChartType" style="width: 100%; height: 200px;"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xl-6 mb-2">
                            <div class="card">
                                <div class="head">
                                    <p>Yearly overview</p>
                                    <p>in USD</p>
                                </div>
                                <div class="body">
                                    <canvas id="combinedMonthlyRewardChart" baseChart class="chart"
                                        [data]="dashboardService.monthlyIncomeData" [options]="dailyIncomeChartOption"
                                        [type]="dailyIncomeChartType" style="height: 200px;">
                                    </canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-lg-12 col-xl-6 mb-2">
                            <div class="card">
                                <div class="head">
                                    <p>1kv statistics</p>
                                </div>
                                <div class="body tableWrapper">
                                    <table>
                                        <tr>
                                            <th style="width: 33%">Type</th>
                                            <th style="width: 33%">Is valid</th>
                                            <th style="width: 33%">Updated on</th>
                                        </tr>
                                        <tr *ngIf="dashboardService.thousandValData == null">
                                            <td>-</td>
                                            <td>-</td>
                                            <td>-</td>
                                        </tr>
                                        <tr *ngFor="let val of dashboardService.thousandValData">
                                            <td><b>{{formatType(val.type)}}</b></td>
                                            <td>
                                                <ng-container *ngIf="val.valid == true">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36"
                                                        viewBox="0 0 24 24" fill="#50B720" stroke-width="2"
                                                        class="ai ai-CircleCheckFill">
                                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                                            d="M12 1C5.925 1 1 5.925 1 12s4.925 11 11 11 11-4.925 11-11S18.075 1 12 1zm4.768 9.14a1 1 0 1 0-1.536-1.28l-4.3 5.159-2.225-2.226a1 1 0 0 0-1.414 1.414l3 3a1 1 0 0 0 1.475-.067l5-6z" />
                                                    </svg>
                                                </ng-container>
                                                <ng-container *ngIf="val.valid == false">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36"
                                                        viewBox="0 0 24 24" fill="#B72020" stroke-width="2"
                                                        class="ai ai-CircleXFill">
                                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                                            d="M12 1C5.925 1 1 5.925 1 12s4.925 11 11 11 11-4.925 11-11S18.075 1 12 1zm3.707 8.707a1 1 0 0 0-1.414-1.414L12 10.586 9.707 8.293a1 1 0 1 0-1.414 1.414L10.586 12l-2.293 2.293a1 1 0 1 0 1.414 1.414L12 13.414l2.293 2.293a1 1 0 0 0 1.414-1.414L13.414 12l2.293-2.293z" />
                                                    </svg>
                                                </ng-container>
                                            </td>
                                            <td>{{dashboardService.formatUnixTimestamp(val.updated)}}</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xl-6 mb-2">
                            <div class="card">
                                <div class="head">
                                    <p>Stash balance</p>
                                </div>
                                <div class="body">
                                    <canvas id="stashBalanceChart" baseChart class="chart"
                                        [data]="dashboardService.lineChartData" [options]="lineChartOptions"
                                        [type]="lineChartType" style="height: 200px;"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-lg-12 col-xl-6 mb-2">
                            <div class="card">
                                <div class="head">
                                    <p>Validator settings</p>
                                </div>
                                <div class="body tableWrapper">
                                    <table>
                                        <tr>
                                            <th>Setting</th>
                                            <th>Option</th>
                                            <th>Action</th>
                                        </tr>
                                        <tr>
                                            <td><b>Active</b></td>
                                            <td>-</td>
                                            <td><button (click)="deleteValidator()">Delete</button></td>
                                        </tr>
                                        <tr>
                                            <td><b>Name</b></td>
                                            <td><input type="text" [(ngModel)]="valName" placeholder="new name"></td>
                                            <td><button [disabled]="valName ==''"
                                                    (click)="updateValidatorName()">Update</button></td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-12 col-xl-6 mb-2">
                            <div class="card">
                                <div class="head">
                                    <p>Income report</p>
                                </div>
                                <div class="body tableWrapper">
                                    <table>
                                        <tr>
                                            <th>Month</th>
                                            <th>Tokens</th>
                                            <th>Monetary value</th>
                                            <th>Action</th>
                                        </tr>
                                        <tr>
                                            <td><select [(ngModel)]="reportMonth" class="select select_up"
                                                    id="historyMonthSwitch" (change)="fetchIncomeReportMonth()">
                                                    <option [ngValue]="null" [disabled]="true">Select month</option>
                                                    <option value="1">Jan</option>
                                                    <option value="2">Feb</option>
                                                    <option value="3">Mar</option>
                                                    <option value="4">Apr</option>
                                                    <option value="5">May</option>
                                                    <option value="6">Jun</option>
                                                    <option value="7">Jul</option>
                                                    <option value="8">Aug</option>
                                                    <option value="9">Sep</option>
                                                    <option value="10">Oct</option>
                                                    <option value="11">Nov</option>
                                                    <option value="12">Dec</option>
                                                </select></td>
                                            <td>{{incomeReportTokens}}</td>
                                            <td>${{incomeReportMonetary}}</td>
                                            <td><button (click)="GeneratePDF()"><svg xmlns="http://www.w3.org/2000/svg"
                                                        width="36" height="36" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                        stroke-linejoin="round" class="ai ai-Download">
                                                        <path d="M12 15V3m0 12l-4-4m4 4l4-4" />
                                                        <path
                                                            d="M2 17l.621 2.485A2 2 0 0 0 4.561 21H19.439a2 2 0 0 0 1.94-1.515L22 17" />
                                                    </svg> Income report</button></td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-container>
            </div>
        </section>

        <div (click)="toggleMobileNav()" class="mobileNavButton" *ngIf="mobileNav == false">
            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ai ai-ThreeLineHorizontal"><path d="M5 6h14M5 12h14M5 18h14"/></svg>
        </div>
    </div>
</main>

<div class="modal fade" #addValidatorModal tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add new validator</h5>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="recipient-name" class="col-form-label">Network:</label>
                        <select class="form-control" #addValNetwork>
                            <option *ngFor="let network of dashboardService.networkList;" [value]="network.id">
                                {{network.name}}</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="message-text" class="col-form-label">Address:</label>
                        <input class="form-control" type="text" placeholder="15wznkm7fMaJLFaw7B8K.." #addValAddress
                            (keyup)="fetchValidatorName(addValNetwork, addValAddress, addValName)">
                    </div>
                    <div class="form-group">
                        <label for="message-text" class="col-form-label">Validator name:</label>
                        <input class="form-control" type="text" placeholder="Amsterdam" #addValName>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn" data-dismiss="modal" *ngIf="!dashboardService.isSyncing()"
                    (click)="toggleModal(addValidatorModal)">Cancel</button>

                <button type="button" class="btn btn-dark" *ngIf="!dashboardService.isSyncing()"
                    (click)="submitValidator(addValName.value, addValAddress.value, addValNetwork.value, addValidatorModal)">Submit
                    validator</button>
                <button type="button" class="btn btn-dark" *ngIf="dashboardService.isSyncing()" id="syncButton"><svg
                        xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="ai ai-ArrowCycle">
                        <path d="M22 12c0 6-4.39 10-9.806 10C7.792 22 4.24 19.665 3 16" />
                        <path d="M2 12C2 6 6.39 2 11.806 2 16.209 2 19.76 4.335 21 8" />
                        <path d="M7 17l-4-1-1 4" />
                        <path d="M17 7l4 1 1-4" />
                    </svg>Syncing..</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" #addPoolModal tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add new pool</h5>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="recipient-name" class="col-form-label">Network:</label>
                        <select class="form-control" #addPoolNetwork>
                            <option *ngFor="let network of dashboardService.networkList;" [value]="network.id">
                                {{network.name}}</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="message-text" class="col-form-label">Pool ID:</label>
                        <input class="form-control" type="text" placeholder="5" #addPoolID
                            (keyup)="fetchPoolName(addPoolNetwork, addPoolID, addPoolName)">
                    </div>
                    <div class="form-group">
                        <label for="message-text" class="col-form-label">Pool name:</label>
                        <input class="form-control" type="text" placeholder="My pool" #addPoolName>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn" data-dismiss="modal" *ngIf="!dashboardService.isSyncing()"
                    (click)="toggleModal(addPoolModal)">Cancel</button>
                <button type="button" class="btn btn-dark"
                    (click)="submitPool(addPoolName.value, addPoolID.value, addPoolNetwork.value, addPoolModal)">Submit
                    validator</button>
                <button type="button" class="btn btn-dark" *ngIf="dashboardService.isSyncing()" id="syncButton"><svg
                        xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="ai ai-ArrowCycle">
                        <path d="M22 12c0 6-4.39 10-9.806 10C7.792 22 4.24 19.665 3 16" />
                        <path d="M2 12C2 6 6.39 2 11.806 2 16.209 2 19.76 4.335 21 8" />
                        <path d="M7 17l-4-1-1 4" />
                        <path d="M17 7l4 1 1-4" />
                    </svg>Syncing..</button>
            </div>
        </div>
    </div>
</div>